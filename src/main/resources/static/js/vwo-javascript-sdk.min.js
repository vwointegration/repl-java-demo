/*!
 * vwo-javascript-sdk - v1.14.0
 * URL - https://github.com/wingify/vwo-node-sdk
 *
 * Copyright 2019-2021 Wingify Software Pvt. Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Dependencies used -
 *  1. murmurhash - ^0.0.2
 *  2. superstruct - ^0.8.3
 *  3. uuid - ^3.3.2
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vwoSdk=t():e.vwoSdk=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=20)}([function(e,t,r){var n=r(27);e.exports=n},function(e,t){e.exports={INDEX:"".concat("lib","/index"),VWO:"".concat("lib","/VWO"),API:"".concat("lib","/api/index"),Activate:"".concat("lib","/api/activate"),GetVariation:"".concat("lib","/api/getVariation"),Track:"".concat("lib","/api/track"),IsFeatureEnabled:"".concat("lib","/api/isFeatureEnabled"),GetFeatureVariableValue:"".concat("lib","/api/getFeatureVariableValue"),Push:"".concat("lib","/api/push"),SegmentEvaluator:"".concat("lib/core","/SegmentEvaluator"),BucketingService:"".concat("lib/core","/BucketingService"),VariationDecider:"".concat("lib/core","/VariationDecider"),ConsoleLogManager:"".concat("lib/services","/ConsoleLogManager"),EventQueue:"".concat("lib/services","/EventQueue"),LoggingManager:"".concat("lib/services","/LoggingManager"),SettingsFileManager:"".concat("lib/services","/SettingsFileManager"),BatchEventsQueue:"".concat("lib/services","/BatchEventsQueue"),CampaignUtil:"".concat("lib/util","/CampaignUtil"),DataTypeUtil:"".concat("lib/util","/DataTypeUtil"),EventDispatcher:"".concat("lib/util","/EventDispatcher"),EventDispatcherUtil:"".concat("lib/util","/EventDispatcherUtil"),FeatureUtil:"".concat("lib/util","/FeatureUtil"),Functionutil:"".concat("lib/util","/Functionutil"),ImpressionUtil:"".concat("lib/util","/ImpressionUtil"),UuidUtil:"".concat("lib/util","/UuidUtil"),ValidateUtil:"".concat("lib/util","/ValidateUtil"),DecisionUtil:"".concat("lib/util","/DecisionUtils"),HttpHandlerUtil:"".concat("lib/util","/HttpHandlerUtil")}},function(e,t){var r={_toStringValue:function(e){return Object.prototype.toString.call(e)},isNumber:function(e){return"[object Number]"===r._toStringValue(e)},isString:function(e){return"[object String]"===r._toStringValue(e)},isObject:function(e){return"[object Object]"===r._toStringValue(e)},isFunction:function(e){return"[object Function]"===r._toStringValue(e)},isBoolean:function(e){return"[object Boolean]"===r._toStringValue(e)},isUndefined:function(e){return"[object Undefined]"===r._toStringValue(e)},isNull:function(e){return"[object Null]"===r._toStringValue(e)},isArray:function(e){return"[object Array]"===r._toStringValue(e)}};e.exports=r},function(e,t,r){var n={};n={name:"vwo-javascript-sdk",version:"1.14.0"},e.exports={SDK_NAME:n.name,SDK_VERSION:n.version,PLATFORM:"server",SEED_VALUE:1,MAX_TRAFFIC_PERCENT:100,MAX_TRAFFIC_VALUE:1e4,MAX_EVENTS_PER_REQUEST:5e3,DEFAULT_EVENTS_PER_REQUEST:100,DEFAULT_REQUEST_TIME_INTERVAL:600,STATUS_RUNNING:"RUNNING",SEED_URL:"https://vwo.com",HTTP_PROTOCOL:"http://",HTTPS_PROTOCOL:"https://",SDK_QUERY_PARAM:"sdk",SDK_VERSION_QUERY_PARAM:"sdk-v"}},function(e,t,r){var n;function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(2),o=r(25),u=r(6),l=r(9),s=(a(n={},u.ACTIVATE,(function(e){var t=e.campaignKey,r=e.userId,n=e.customVariables,a=void 0===n?{}:n,i=e.variationTargetingVariables,u=void 0===i?{}:i,l=e.userStorageData,s=void 0===l?{}:l,c=e.shouldTrackReturningUser,g=void 0!==c&&c,f=e.metaData,E=void 0===f?{}:f;return[{key:"campaignKey",value:t,type:o.STRING},{key:"userId",value:r,type:o.STRING},{key:"customVariables",value:a,type:o.OBJECT},{key:"variationTargetingVariables",value:u,type:o.OBJECT},{key:"userStorageData",value:s,type:o.OBJECT},{key:"shouldTrackReturningUser",value:g,type:o.BOOLEAN},{key:"metaData",value:E,type:o.OBJECT}]})),a(n,u.TRACK,(function(e){var t=e.campaignKey,r=e.userId,n=e.goalIdentifier,a=e.customVariables,i=void 0===a?{}:a,u=e.variationTargetingVariables,s=void 0===u?{}:u,c=e.userStorageData,g=void 0===c?{}:c,f=e.goalTypeToTrack,E=void 0===f?l.ALL:f,d=e.shouldTrackReturningUser,p=void 0!==d&&d,v=e.metaData,S=void 0===v?{}:v;return[{key:"campaignKey",value:t,type:o.STRING_NULL_UNDEFINED_ARRAY},{key:"userId",value:r,type:o.STRING},{key:"goalIdentifier",value:n,type:o.STRING},{key:"customVariables",value:i,type:o.OBJECT},{key:"variationTargetingVariables",value:s,type:o.OBJECT},{key:"userStorageData",value:g,type:o.OBJECT},{key:"goalTypeToTrack",value:E,type:o.STRING},{key:"shouldTrackReturningUser",value:p,type:o.BOOLEAN},{key:"metaData",value:S,type:o.OBJECT}]})),a(n,u.IS_FEATURE_ENABLED,(function(e){var t=e.campaignKey,r=e.userId,n=e.customVariables,a=void 0===n?{}:n,i=e.variationTargetingVariables,u=void 0===i?{}:i,l=e.userStorageData,s=void 0===l?{}:l,c=e.shouldTrackReturningUser,g=void 0!==c&&c,f=e.metaData,E=void 0===f?{}:f;return[{key:"campaignKey",value:t,type:o.STRING},{key:"userId",value:r,type:o.STRING},{key:"customVariables",value:a,type:o.OBJECT},{key:"variationTargetingVariables",value:u,type:o.OBJECT},{key:"userStorageData",value:s,type:o.OBJECT},{key:"shouldTrackReturningUser",value:g,type:o.BOOLEAN},{key:"metaData",value:E,type:o.OBJECT}]})),a(n,u.GET_FEATURE_VARIABLE_VALUE,(function(e){var t=e.campaignKey,r=e.variableKey,n=e.userId,a=e.customVariables,i=void 0===a?{}:a,u=e.variationTargetingVariables,l=void 0===u?{}:u,s=e.userStorageData,c=void 0===s?{}:s,g=e.metaData,f=void 0===g?{}:g;return[{key:"campaignKey",value:t,type:o.STRING},{key:"variableKey",value:r,type:o.STRING},{key:"userId",value:n,type:o.STRING},{key:"customVariables",value:i,type:o.OBJECT},{key:"variationTargetingVariables",value:l,type:o.OBJECT},{key:"userStorageData",value:c,type:o.OBJECT},{key:"metaData",value:f,type:o.OBJECT}]})),a(n,u.PUSH,(function(e){var t=e.tagKey,r=e.tagValue,n=e.userId;return[{key:"tagKey",value:t,type:o.STRING},{key:"tagValue",value:r,type:o.STRING},{key:"userId",value:n,type:o.STRING}]})),n);s[u.GET_VARIATION_NAME]=s[u.ACTIVATE];var c={isValidValue:function(e){return!(void 0===e||!e)},isValidString:function(e){return c.isValidValue(e)&&i.isString(e)},isValidNumber:function(e){return c.isValidValue(e)&&i.isNumber(e)},isValidFunction:function(e){return c.isValidValue(e)&&i.isFunction(e)},isValidBoolean:function(e){return void 0!==e&&i.isBoolean(e)},isValidObject:function(e){return void 0!==e&&i.isObject(e)},areValidParamsForAPIMethod:function(e){for(var t=s[e.method](e),r=[],n=0;n<t.length;n++){var a=t[n],u=a.value;switch(a.type){case o.NUMBER:r.push(c.isValidNumber(u));break;case o.STRING:r.push(c.isValidString(u));break;case o.BOOLEAN:r.push(c.isValidBoolean(u));break;case o.OBJECT:r.push(c.isValidObject(u));break;case o.STRING_NULL_UNDEFINED_ARRAY:var l=c.isValidString(u)||i.isUndefined(u)||i.isNull(u)||i.isArray(u);r.push(l)}}return r.every((function(e){return e}))}};e.exports=c},function(e,t,r){var n={cloneObject:function(e){return e?JSON.parse(JSON.stringify(e)):e},getRandomNumber:function(){return Math.random()},getCurrentUnixTimestamp:function(){return Math.ceil(+new Date/1e3)},matchWithRegex:function(e,t){try{return e.match(new RegExp(t))}catch(e){var n=r(0),a=r(1),i=n.getLogger(),o=n.LogLevelEnum,u=n.LogMessageEnum,l=n.LogMessageUtil,s=a.FunctionUtil;return i.log(o.ERROR,l.build(u.ERROR_MESSAGES.REGEX_CREATION_FAILED,{file:s})),null}},getCurrentTime:function(){return(new Date).toISOString()},convertObjectKeysToString:function(e,t){var r="";for(var n in t=t||[],e)e.hasOwnProperty(n)&&-1===t.indexOf(n)&&(r+=n+"="+e[n]+"&");return r}};e.exports=n},function(e,t){e.exports={LAUNCH:"launch",ACTIVATE:"activate",GET_VARIATION_NAME:"getVariation",TRACK:"track",IS_FEATURE_ENABLED:"isFeatureEnabled",GET_FEATURE_VARIABLE_VALUE:"getFeatureVariableValue",PUSH:"push"}},function(e,t,r){var n=r(4),a=r(3),i=r(0),o=r(1),u=r(9),l=r(14),s=i.LogLevelEnum,c=i.LogMessageEnum,g=i.LogMessageUtil,f=i.getLogger(),E={_getVariationBucketRange:function(e){if(!e||0===e)return 0;var t=Math.ceil(100*e);return Math.min(t,a.MAX_TRAFFIC_VALUE)},getCampaignBasedOnId:function(e,t){for(var r,n=0;n<e.campaigns.length;n++)if(parseInt(e.campaigns[n].id,10)===parseInt(t,10)){r=e.campaigns[n];break}return r},scaleVariationWeights:function(e){var t=e.reduce((function(e,t){return e+t.weight}),0);if(t)e.forEach((function(e){return e.weight=e.weight/t*100}));else{var r=100/e.length;e.forEach((function(e){return e.weight=r}))}},getCampaign:function(e,t){for(var r,n=0;n<e.campaigns.length;n++)if(e.campaigns[n].key===t){r=e.campaigns[n];break}return r},getCampaignsForKeys:function(e,t){var r=[];return t.forEach((function(t){var n=E.getCampaign(e,t);n?r.push(n):r.push({key:t})})),r},getCampaignsForGoal:function(e,t,r){var n=[];return e.campaigns.forEach((function(a){var i=E.getCampaignGoal(e,a.key,t);!i||r!==u.ALL&&i.type!==r||n.push(a)})),n.length||f.log(s.ERROR,g.build(c.ERROR_MESSAGES.NO_CAMPAIGN_FOUND,{file:o.CampaignUtil,goalIdentifier:t})),n},getCampaignStatus:function(e,t){var r=E.getCampaign(e,t);return r&&r.status?r.status.toLowerCase():""},isCampaignRunning:function(e,t){return"running"===E.getCampaignStatus(e,t)},validateCampaign:function(e){return n.isValidValue(e)&&e.variations&&Object.keys(e.variations).length>0},setVariationAllocation:function(e){for(var t=e.variations.length,r=0,n=0;r<t;r++){var a=e.variations[r];n+=E.assignRangeValues(a,n),f.log(s.INFO,g.build(c.INFO_MESSAGES.VARIATION_RANGE_ALLOCATION,{file:o.CampaignUtil,campaignKey:e.key,variationName:a.name,variationWeight:a.weight,start:a.startVariationAllocation,end:a.endVariationAllocation}))}},assignRangeValues:function(e,t){var r;return(r=E._getVariationBucketRange(e.weight))?(e.startVariationAllocation=t+1,e.endVariationAllocation=t+r):(e.startVariationAllocation=-1,e.endVariationAllocation=-1),r},getCampaignGoal:function(e,t,r){var n=null;if(!e||!t||!r)return n;var a=E.getCampaign(e,t);if(!a)return n;for(var i=0;i<a.goals.length;i++){var o=a.goals[i];if(o.identifier===r){n=o;break}}return n},getCampaignVariation:function(e,t,r){var n=null;if(!e||!t||!r)return n;var a=E.getCampaign(e,t);if(!a)return n;for(var i=0;i<a.variations.length;i++){var o=a.variations[i];if(o.name===r){n=o;break}}return n},getControlForCampaign:function(e){var t={};if(!e||!e.variations)return t;for(var r=0;r<e.variations.length;r++)if(1===e.variations[r].id){t=e.variations[r];break}return t},isFeatureTestCampaign:function(e){return!(!e||e.type!==l.FEATURE_TEST)},isFeatureRolloutCampaign:function(e){return!(!e||e.type!==l.FEATURE_ROLLOUT)},isAbCampaign:function(e){return!(!e||e.type!==l.AB)}};e.exports=E},function(e,t,r){var n=r(24),a=r(12),i=r(7),o=r(2),u=r(5),l=r(0),s=r(1),c=r(32),g=l.LogLevelEnum,f=l.LogMessageEnum,E=l.LogMessageUtil,d=l.getLogger(),p=r(33),v=r(16),S=r(39),R=r(17),_=r(3),A=r(14),I=r(6),y=s.DecisionUtil,b="whitelisting",O="pre-segmentation",m={getVariation:function(e,t,r,a,u,l){var s,T,h,N,U,L,V=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},G=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},D=arguments.length>8?arguments[8]:void 0,F=arguments.length>9?arguments[9]:void 0,C=arguments.length>10?arguments[10]:void 0,k=arguments.length>11&&void 0!==arguments[11]?arguments[11]:"",M={campaignId:r.id,campaignKey:a,campaignType:r.type,customVariables:l,event:S.DECISION_TYPES.CAMPAIGN_DECISION,goalIdentifier:C,isForcedVariationEnabled:r.isForcedVariationEnabled,sdkVersion:_.SDK_VERSION,source:k,userId:u,variationTargetingVariables:V,vwoUserId:R.generateFor(u,e.accountId)};if(r.isForcedVariationEnabled){var P,K=m._evaluateWhitelisting(r,a,u,V);if(K?(s=c.PASSED,P="for ".concat(K.variationName)):(s=c.FAILED,P=""),d.log(g.INFO,E.build(f.INFO_MESSAGES.SEGMENTATION_STATUS,{campaignKey:a,userId:u,customVariables:JSON.stringify(V),file:y,status:s,segmentationType:b,variation:P})),K)return h=K.variationName,N=K.variationId,v.execute(Object.assign({fromUserStorageService:!1,isUserWhitelisted:!1},r.type===A.FEATURE_ROLLOUT?{isFeatureEnabled:!!h}:{variationName:h,variationId:N,isUserWhitelisted:!!h},M)),K}else d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.WHITELISTING_SKIPPED,{campaignKey:a,userId:u,file:y}));var B=m._getStoredVariationAndGoalIdentifiers(e,t,r.key,u,G)||{};if(U=B.storedVariation,L=B.goalIdentifier,U)return h=U.name,N=U.id,d.log(g.INFO,E.build(f.INFO_MESSAGES.GOT_STORED_VARIATION,{file:y,campaignKey:a,userId:u,variationName:U.name})),v.execute(Object.assign({fromUserStorageService:!!h,isUserWhitelisted:!1},r.type===A.FEATURE_ROLLOUT?{isFeatureEnabled:!!h}:{variationName:h,variationId:N},M)),{variation:U,variationName:U.name,variationId:U.id,storedGoalIdentifier:L,isStoredVariation:!0};if(!o.isUndefined(e.userStorageService)&&!F&&o.isUndefined(U)&&!i.isFeatureRolloutCampaign(r))return d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.CAMPAIGN_NOT_ACTIVATED,{file:y,campaignKey:a,userId:u,api:e.apiName})),d.log(g.INFO,E.build(f.INFO_MESSAGES.CAMPAIGN_NOT_ACTIVATED,{file:y,campaignKey:a,userId:u,reason:e.apiName===I.TRACK?"track it":"get the decision/value"})),{};if(o.isObject(r.segments)&&!Object.keys(r.segments).length)d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.SEGMENTATION_SKIPPED,{campaignKey:a,userId:u,file:y}));else{var j=p(r.segments,l,a,u);if(s=j?c.PASSED:c.FAILED,d.log(g.INFO,E.build(f.INFO_MESSAGES.SEGMENTATION_STATUS,{campaignKey:a,userId:u,customVariables:JSON.stringify(l||{}),file:y,status:s,segmentationType:O,variation:""})),s===c.FAILED)return{}}var w=n.getVariationAllotted(u,r);return T=w.variation,h=w.variationName,N=w.variationId,h?(m._saveUserData(e,r,h,u,D,C),d.log(g.INFO,E.build(f.INFO_MESSAGES.VARIATION_ALLOCATED,{file:y,campaignKey:a,userId:u,variationName:h}))):d.log(g.INFO,E.build(f.INFO_MESSAGES.NO_VARIATION_ALLOCATED,{file:y,campaignKey:a,userId:u})),v.execute(Object.assign({fromUserStorageService:!1,isUserWhitelisted:!1},r.type===A.FEATURE_ROLLOUT?{isFeatureEnabled:!!h}:{variationName:h,variationId:N},M)),{variation:T&&T.variation,variationName:h,variationId:N}},_evaluateWhitelisting:function(e,t,r,n){var l,s;n=Object.assign({},n,{_vwoUserId:r});var v=[];if(e.variations.forEach((function(e){!o.isObject(e.segments)||Object.keys(e.segments).length?(o.isObject(e.segments)&&p(e.segments,n,t,r,e.name)?(s=c.PASSED,v.push(u.cloneObject(e))):s=c.FAILED,d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.SEGMENTATION_STATUS,{campaignKey:t,userId:r,customVariables:JSON.stringify(n),file:y,status:s,segmentationType:b,variation:"for ".concat(e.name)}))):d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.SEGMENTATION_SKIPPED,{campaignKey:t,userId:r,file:y,variation:", for ".concat(e.name)}))})),v.length>1){i.scaleVariationWeights(v);for(var S=0,R=0;S<v.length;S++)R+=i.assignRangeValues(v[S],R);l=a._getVariation(v,a.calculateBucketValue(r))}else l=v[0];if(l)return{variation:l,variationName:l.name,variationId:l.id}},_getStoredVariationAndGoalIdentifiers:function(e,t,r,n,a){var o=m._getStoredUserData(e,n,r,a),u=o.variationName,l=o.goalIdentifier;return o&&o.campaignKey&&u?(d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.GETTING_STORED_VARIATION,{file:y,campaignKey:r,userId:n,variationName:u})),{storedVariation:i.getCampaignVariation(t,r,u),goalIdentifier:l}):(d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.NO_STORED_VARIATION,{file:y,campaignKey:r,userId:n})),null)},_getStoredVariation:function(e,t,r,n,a){var i=m._getStoredVariationAndGoalIdentifiers(e,t,r,n,a);return i&&i.storedVariation?i.storedVariation:null},_getStoredUserData:function(e,t,r,n){var a={userId:t,variationName:null,campaignKey:r,goalIdentifier:null};if(!e.userStorageService)return d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.NO_USER_STORAGE_SERVICE_GET,{file:y})),a;try{var i=e.userStorageService.get(t,r)||{};return d.log(g.INFO,E.build(f.INFO_MESSAGES.GETTING_DATA_USER_STORAGE_SERVICE,{file:y,userId:t})),Object.assign({},i,n)}catch(e){d.log(g.ERROR,E.build(f.ERROR_MESSAGES.GET_USER_STORAGE_SERVICE_FAILED,{file:y,userId:t}))}},_saveUserData:function(e,t,r,n,a,i){var u=!1;if(!e.userStorageService)return d.log(g.DEBUG,E.build(f.DEBUG_MESSAGES.NO_USER_STORAGE_SERVICE_SET,{file:y})),u;try{var l={userId:n,variationName:r,campaignKey:t.key};o.isUndefined(i)||(l.goalIdentifier=i),o.isUndefined(a)||(l.metaData=a),e.userStorageService.set(l),d.log(g.INFO,E.build(f.INFO_MESSAGES.SETTING_DATA_USER_STORAGE_SERVICE,{file:y,userId:n})),u=!0}catch(e){d.log(g.ERROR,E.build(f.ERROR_MESSAGES.SET_USER_STORAGE_SERVICE_FAILED,{file:y,userId:n})),u=!1}return u}};e.exports=m},function(e,t){e.exports={REVENUE:"REVENUE_TRACKING",CUSTOM:"CUSTOM_GOAL",ALL:"ALL"}},function(e,t){var r={areObjectKeys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length},getKeyValue:function(e){if(r.areObjectKeys(e)){var t=Object.keys(e)[0];return{key:t,value:e[t]}}},objectValues:function(e){return Object.keys(e).map((function(t){return e[t]}))}};e.exports=r},function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(3),i=r(18),o=r(9),u=r(17),l=r(4),s=r(5),c=r(0),g=r(1),f=c.LogLevelEnum,E=c.LogMessageEnum,d=c.LogMessageUtil,p=c.getLogger();function v(e,t){var r=e.accountId;return Object.assign({},function(e,t){return{sId:s.getCurrentUnixTimestamp(),u:u.generateFor(t,e.accountId)}}(e,t),S.getReportingProperties(e),{account_id:r,uId:encodeURIComponent(t),random:s.getRandomNumber(),ap:a.PLATFORM})}var S={buildEventForPushing:function(e,t,r,o){var u=Object.assign({},v(e,o));return u.url=a.HTTPS_PROTOCOL+i.BASE_URL+i.PUSH,u.tags=JSON.stringify({u:n({},encodeURIComponent(t),encodeURIComponent(r))}),p.log(f.DEBUG,d.build(E.DEBUG_MESSAGES.IMPRESSION_FOR_PUSH,{file:g.ImpressionUtil,properties:JSON.stringify(u)})),u},buildBatchEventForPushing:function(e,t,r,n){},buildEventForTrackingUser:function(e,t,r,n){var o=Object.assign({experiment_id:t,combination:r},v(e,n));return o.ed=JSON.stringify({p:"server"}),o.url=a.HTTPS_PROTOCOL+i.BASE_URL+i.TRACK_USER,p.log(f.DEBUG,d.build(E.DEBUG_MESSAGES.IMPRESSION_FOR_TRACK_USER,{file:g.ImpressionUtil,properties:JSON.stringify(o)})),o},buildBatchEventForTrackingUser:function(e,t,r,n){},buildEventForTrackingGoal:function(e,t,r,n){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=u.id,S=Object.assign({experiment_id:t,combination:r},v(e,n));return S.url=a.HTTPS_PROTOCOL+i.BASE_URL+i.TRACK_GOAL,S.goal_id=c,u.type===o.REVENUE&&l.isValidValue(s)&&(S.r=s),p.log(f.DEBUG,d.build(E.DEBUG_MESSAGES.IMPRESSION_FOR_TRACK_GOAL,{file:g.ImpressionUtil,properties:JSON.stringify(S)})),S},buildBatchEventForTrackingGoal:function(e,t,r,n){arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5]},getReportingProperties:function(e){var t,r=e.sdkKey;return n(t={},a.SDK_QUERY_PARAM,a.SDK_NAME),n(t,a.SDK_VERSION_QUERY_PARAM,a.SDK_VERSION),n(t,"env",r),t}};e.exports=S},function(e,t,r){var n=r(26),a=r(3),i=r(4),o=r(0),u=r(1),l=o.LogLevelEnum,s=o.LogMessageEnum,c=o.LogMessageUtil,g=o.getLogger(),f={_generateBucketValue:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e/Math.pow(2,32),a=(t*n+1)*r,i=Math.floor(a);return i},_getVariation:function(e,t){for(var r=0;r<Object.keys(e).length;r++){var n=e[r];if(t>=n.startVariationAllocation&&t<=n.endVariationAllocation)return n}return null},_getBucketValueForUser:function(e){var t=n.v3(e,a.SEED_VALUE),r=f._generateBucketValue(t,a.MAX_TRAFFIC_PERCENT);return g.log(l.DEBUG,c.build(s.DEBUG_MESSAGES.USER_HASH_BUCKET_VALUE,{file:u.BucketingService,hashValue:t,bucketValue:r,userId:e})),r},isUserPartOfCampaign:function(e,t){if(!i.isValidValue(e)||!t)return!1;var r=t.percentTraffic,n=f._getBucketValueForUser(e),a=0!==n&&n<=r;return g.log(l.INFO,c.build(s.INFO_MESSAGES.USER_ELIGIBILITY_FOR_CAMPAIGN,{file:u.BucketingService,userId:e,isUserPart:a})),a},bucketUserToVariation:function(e,t){var r;if(!i.isValidValue(e))return g.log(l.ERROR,c.build(s.ERROR_MESSAGES.INVALID_USER_ID,{file:u.BucketingService,userId:e,method:"bucketUserToVariation"})),null;if(!t)return null;t.percentTraffic&&(r=a.MAX_TRAFFIC_VALUE/t.percentTraffic/100);var n=f._generateHashValue(e),o=f._generateBucketValue(n,a.MAX_TRAFFIC_VALUE,r);return g.log(l.DEBUG,c.build(s.DEBUG_MESSAGES.VARIATION_HASH_BUCKET_VALUE,{file:u.BucketingService,userId:e,campaignKey:t.key,percentTraffic:t.percentTraffic,bucketValue:o,hashValue:n})),f._getVariation(t.variations,o)},calculateBucketValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=f._generateHashValue(e);return f._generateBucketValue(r,a.MAX_TRAFFIC_VALUE,t)},_generateHashValue:function(e){return n.v3(e,a.SEED_VALUE)}};e.exports=f},function(e,t,r){var n,a;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(28),u={NOTSET:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},l=(i(n={},u.NOTSET,"".concat(o.BOLD).concat(o.WHITE,"[NOTSET]:").concat(o.RESET)),i(n,u.DEBUG,"".concat(o.BOLD).concat(o.LIGHTBLUE,"[DEBUG]: ").concat(o.RESET)),i(n,u.INFO,"".concat(o.BOLD).concat(o.CYAN,"[INFO]:  ").concat(o.RESET)),i(n,u.WARN,"".concat(o.BOLD).concat(o.YELLOW,"[WARN]:  ").concat(o.RESET)),i(n,u.ERROR,"".concat(o.BOLD).concat(o.RED,"[ERROR]: ").concat(o.RESET)),n),s=(i(a={},u.NOTSET,"[NOTSET]:"),i(a,u.DEBUG,"[DEBUG]: "),i(a,u.INFO,"[INFO]:  "),i(a,u.WARN,"[WARN]:  "),i(a,u.ERROR,"[ERROR]: "),a);e.exports={LogLevelEnum:u,LogNumberLevel:{_0:"NOTSET",_1:"DEBUG",_2:"INFO",_3:"WARN",_4:"ERROR"},LogLevelInfoEnum:s,LogLevelColorInfoEnum:l}},function(e,t){e.exports={FEATURE_TEST:"FEATURE_TEST",FEATURE_ROLLOUT:"FEATURE_ROLLOUT",AB:"VISUAL_AB"}},function(e,t,r){var n={SegmentOperandTypes:r(34),SegmentOperatorTypes:r(35),SegmentOperandValueTypeRegexes:r(36),SegmentOperandValues:r(37)};e.exports=n},function(e,t,r){var n=r(2),a={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.callback=e.integrations&&e.integrations.callback},execute:function(e){n.isFunction(this.callback)&&this.callback(e)}};e.exports=a},function(e,t,r){var n=r(40),a=r(3),i=r(0),o=r(1),u=i.LogLevelEnum,l=i.LogMessageEnum,s=i.LogMessageUtil,c=i.getLogger(),g=n(a.SEED_URL,n.URL),f={generateFor:function(e,t){e="".concat(e);var r="".concat(t),n=f.generate(r,g),a=f.generate(e,n).replace(/-/gi,"").toUpperCase();return c.log(u.DEBUG,s.build(l.DEBUG_MESSAGES.UUID_FOR_USER,{file:o.UuidUtil,userId:e,accountId:t,desiredUuid:a})),a},generate:function(e,t){if(e&&t)return n(e,t)}};e.exports=f},function(e,t){e.exports={BASE_URL:"dev.visualwebsiteoptimizer.com",SETTINGS_URL:"/server-side/settings",WEBHOOK_SETTINGS_URL:"/server-side/pull",TRACK_USER:"/server-side/track-user",TRACK_GOAL:"/server-side/track-goal",PUSH:"/server-side/push",BATCH_EVENTS:"/server-side/batch-events"}},function(e,t,r){var n=r(3),a=r(18),i=r(5),o=i.getRandomNumber;i.getCurrentTime;e.exports={get:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t){var u="https",l=a.BASE_URL,s=a.SETTINGS_URL;return i.isViaWebhook&&(s=a.WEBHOOK_SETTINGS_URL),s+="?a=".concat(e,"&")+"i=".concat(t,"&")+"r=".concat(o(),"&")+"platform=".concat(n.PLATFORM,"&")+"".concat(n.SDK_QUERY_PARAM,"=").concat(n.SDK_NAME,"&")+"".concat(n.SDK_VERSION_QUERY_PARAM,"=").concat(n.SDK_VERSION),i.hostname&&i.path&&(u=i.protocol,i.port,l=i.hostname||l,s=i.path||s),r(57).send({method:"GET",url:"".concat(u,"://").concat(l).concat(s)})}console.error("AccountId and sdkKey are required for fetching account settings. Aborting!")}}},function(e,t,r){var n=r(21),a=r(2),i=r(5),o=r(10).objectValues,u=r(19),l=r(9),s=(r(3).MAX_EVENTS_PER_REQUEST,r(0)),c=r(1).INDEX,g=s.setLogHandler,f=s.setLogLevel,E=s.LogLevelEnum,d=s.LogNumberLevel,p=s.LogMessageEnum,v=s.LogMessageUtil,S=s.getLogger();function R(e){throw S.log(E.ERROR,e),new Error(S.log(E.ERROR,e))}s.setLogLevel(E.ERROR),e.exports={logging:s,setLogger:g,setLogLevel:f,getSettingsFile:u.get,GoalTypeEnum:l,launch:function(e){var t={};try{if(i.cloneObject(e),!a.isUndefined(e.shouldTrackReturningUser)&&!a.isBoolean(e.shouldTrackReturningUser))throw new Error("shouldTrackReturningUser should be boolean");if(!a.isUndefined(e.isDevelopmentMode)&&!a.isBoolean(e.isDevelopmentMode))throw new Error("isDevelopmentMode should be boolean");if(e.goalTypeToTrack&&!o(l).includes(e.goalTypeToTrack))throw new Error("goalTypeToTrack should be certain strings");if(e.logging&&e.logging.level&&!o(E).includes(e.logging.level))throw new Error("log level should be certain values");if(e.pollingInterval&&!a.isNumber(e.pollingInterval))R(v.build(p.ERROR_MESSAGES.POLLING_INTERVAL_INVALID,{file:c}));if(e.pollingInterval&&a.isUndefined(e.sdkKey))R(v.build(p.ERROR_MESSAGES.SDK_KEY_NOT_PROVIVED,{file:c}));if(e.pollingInterval&&!a.isString(e.sdkKey))R(v.build(p.ERROR_MESSAGES.SDK_KEY_NOT_STRING,{file:c}));if(!a.isUndefined(e.batchEvents)&&!a.isObject(e.batchEvents))R(v.build(p.ERROR_MESSAGES.EVENT_BATCHING_NOT_OBJECT,{file:c}));a.isObject(e.batchEvents)&&(e.batchEvents=null),t=e}catch(e){S.log(E.ERROR,v.build(p.ERROR_MESSAGES.SDK_CONFIG_CORRUPTED,{file:c})),t={}}return t.isDevelopmentMode&&s.setLogColorMode(!0),t.logging&&a.isObject(t.logging)&&(void 0!==t.logging.haveColoredLogs&&s.setLogColorMode(t.logging.haveColoredLogs),t.logging.logger&&a.isObject(t.logging.logger)&&a.isFunction(t.logging.logger.log)?(s.setLogHandler(t.logging.logger),s.setLogLevel(s.LogLevelEnum.NOTSET),S.log(E.DEBUG,v.build(p.DEBUG_MESSAGES.CUSTOM_LOGGER_USED,{file:c}))):t.logging.logger&&S.log(E.ERROR,v.build(p.ERROR_MESSAGES.CUSTOM_LOGGER_MISCONFIGURED,{file:c})),void 0!==t.logging.level&&(s.setLogLevel(t.logging.level),S.log(E.DEBUG,v.build(p.DEBUG_MESSAGES.LOG_LEVEL_SET,{file:c,level:d["_"+t.logging.level]})))),t.isDevelopmentMode&&S.log(E.DEBUG,v.build(p.DEBUG_MESSAGES.SET_DEVELOPMENT_MODE,{file:c})),t.logger=t.logger||S,new n(t)}}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(22),i=r(51),o=r(54);r(11);var u=r(0),l=r(1),s=r(16),c=u.LogLevelEnum,g=u.LogMessageEnum,f=u.LogMessageUtil,E=l.VWO,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getVariation=this.getVariationName,this.userStorageService=t.userStorageService,this.logger=t.logger,s.init(t);var r=new o(t);r.isSettingsFileValid()?(this.logger.log(c.DEBUG,f.build(g.DEBUG_MESSAGES.VALID_CONFIGURATION,{file:E})),r.checkAndPoll(),this.eventQueue=new i,this.SettingsFileManager=r,this.SettingsFileManager.processSettingsFile(),this.logger.log(c.DEBUG,f.build(g.DEBUG_MESSAGES.SDK_INITIALIZED,{file:E}))):this.logger.log(c.ERROR,f.build(g.ERROR_MESSAGES.INVALID_SETTINGS_FILE,{file:E}))}var t,r,u;return t=e,(r=[{key:"activate",value:function(e,t,r){try{return a.activate(this,e,t,r)}catch(e){return this.logger.log(c.ERROR,e.message),null}}},{key:"getVariationName",value:function(e,t,r){try{return a.getVariation(this,e,t,r)}catch(e){return this.logger.log(c.ERROR,e.message),null}}},{key:"track",value:function(e,t,r,n){try{return a.track(this,e,t,r,n)}catch(e){return this.logger.log(c.ERROR,e.message),null}}},{key:"isFeatureEnabled",value:function(e,t,r){try{return a.isFeatureEnabled(this,e,t,r)}catch(e){return this.logger.log(c.ERROR,e.message),!1}}},{key:"getFeatureVariableValue",value:function(e,t,r,n){try{return a.getFeatureVariableValue(this,e,t,r,n)}catch(e){return this.logger.log(c.ERROR,e.message),null}}},{key:"push",value:function(e,t,r){try{return a.push(this,e,t,r)}catch(e){return this.logger.log(c.ERROR,e.message),!1}}},{key:"flushEvents",value:function(){}},{key:"getAndUpdateSettingsFile",value:function(e,t){return this.SettingsFileManager.getAndUpdateSettingsFile(e,t)}}])&&n(t.prototype,r),u&&n(t,u),e}();e.exports=d},function(e,t,r){var n=r(23),a=r(44),i=r(45),o=r(46),u=r(47),l=r(50);e.exports={activate:n,getVariation:a,track:i,isFeatureEnabled:o,getFeatureVariableValue:u,push:l}},function(e,t,r){var n=r(3),a=r(6),i=r(8),o=r(7),u=r(11),l=r(4),s=r(2),c=r(0),g=r(1),f=c.LogLevelEnum,E=c.LogMessageEnum,d=c.LogMessageUtil,p=g.Activate;e.exports=function(e,t,r){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},g=a.ACTIVATE,v=!1;if(s.isObject(c)){var S=c.customVariables,R=c.variationTargetingVariables,_=c.userStorageData,A=c.shouldTrackReturningUser,I=c.metaData;l.areValidParamsForAPIMethod({method:a.ACTIVATE,campaignKey:t,userId:r,customVariables:S,variationTargetingVariables:R,userStorageData:_,shouldTrackReturningUser:A,metaData:I})&&(v=!0)}if(!1===v)return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.ACTIVATE_API_MISSING_PARAMS,{file:p})),null;var y=e.SettingsFileManager.getConfig(),b=e.SettingsFileManager.getSettingsFile(g);if(!b)return null;A=A||y.shouldTrackReturningUser||!1;var O=o.getCampaign(b,t);if(!O||O.status!==n.STATUS_RUNNING)return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.CAMPAIGN_NOT_RUNNING,{file:p,campaignKey:t,api:g})),null;if(!o.isAbCampaign(O))return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.INVALID_API,{file:p,campaignKey:t,campaignType:O.type,userId:r,api:g})),null;var m=i.getVariation(y,b,O,t,r,S,R,_,I,!0,void 0,g),T=m.variationId,h=m.variationName,N=m.isStoredVariation;if(!l.isValidValue(h))return e.logger.log(f.INFO,d.build(E.INFO_MESSAGES.INVALID_VARIATION_KEY,{file:p,userId:r,campaignKey:t})),null;if(N&&!A)return e.logger.log(f.INFO,d.build(E.INFO_MESSAGES.USER_ALREADY_TRACKED,{file:p,userId:r,campaignKey:t,api:g})),h;if(y.batchEvents){var U=u.buildBatchEventForTrackingUser(b,O.id,T,r);e.batchEventsQueue.enqueue(U)}else{var L=u.buildEventForTrackingUser(b,O.id,T,r);e.eventQueue.process(y,L,e)}return h}},function(e,t,r){var n=r(4),a=r(12),i=r(0),o=r(1),u=i.LogLevelEnum,l=i.LogMessageEnum,s=i.LogMessageUtil,c=i.getLogger(),g={getVariationAllotted:function(e,t){var r={variation:null,variationId:null,variationName:null};if(!n.isValidValue(e))return c.log(u.ERROR,s.build(l.ERROR_MESSAGES.INVALID_USER_ID,{file:o.BucketingService,userId:e,method:"getVariationAllotted"})),r;if(a.isUserPartOfCampaign(e,t)){var i=g.getVariationOfCampaignForUser(e,t)||{};r.variation=i,r.variationId=i.id,r.variationName=i.name,c.log(u.DEBUG,s.build(l.DEBUG_MESSAGES.GOT_VARIATION_FOR_USER,{file:o.VariationDecider,variationName:i.name,userId:e,campaignKey:t.key,method:"getVariationAllotted"}))}else c.log(u.DEBUG,s.build(l.DEBUG_MESSAGES.USER_NOT_PART_OF_CAMPAIGN,{file:o.VariationDecider,userId:e,campaignKey:t.key,method:"getVariationAllotted"}));return r},getVariationOfCampaignForUser:function(e,t){if(!n.isValidValue(e)||!t)return null;var r=a.bucketUserToVariation(e,t);return r&&r.name?(c.log(u.INFO,s.build(l.INFO_MESSAGES.GOT_VARIATION_FOR_USER,{file:o.VariationDecider,variationName:r.name,userId:e,campaignKey:t.key})),{variation:r,name:r.name,id:r.id}):(c.log(u.INFO,s.build(l.INFO_MESSAGES.USER_GOT_NO_VARIATION,{file:o.VariationDecider,userId:e,campaignKey:t.key})),null)}};e.exports=g},function(e,t){e.exports={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",OBJECT:"object"}},function(e,t,r){!function(){function t(e,t){var r,n,a,i,o,u,l,s;for(r=3&e.length,n=e.length-r,a=t,o=3432918353,u=461845907,s=0;s<n;)l=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24,++s,a=27492+(65535&(i=5*(65535&(a=(a^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*u+(((l>>>16)*u&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(s+2))<<16;case 2:l^=(255&e.charCodeAt(s+1))<<8;case 1:a^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(s)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*u+(((l>>>16)*u&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}var r=t;r.v2=function(e,t){for(var r,n=e.length,a=t^n,i=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(r>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:a^=(255&e.charCodeAt(i+2))<<16;case 2:a^=(255&e.charCodeAt(i+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(i)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0},r.v3=t,e.exports=r}()},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(13),i=a.LogLevelEnum,o=a.LogNumberLevel,u=r(29),l=r(30),s=r(31),c=i.NOTSET,g=!1,f=new s,E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.isColoredLogEnabled=g}var t,r,a;return t=e,(r=[{key:"_customLog",value:function(e,t){e<c||f.log(e,t)}},{key:"log",value:function(e,t){try{this._customLog(e,t)}catch(e){console.error("VWO: Could not log.",e)}}},{key:"info",value:function(e){this._customLog(i.INFO,e)}},{key:"debug",value:function(e){this._customLog(i.DEBUG,e)}},{key:"warn",value:function(e){this._customLog(i.WARN,e)}},{key:"error",value:function(e){this._customLog(i.ERROR,e)}}])&&n(t.prototype,r),a&&n(t,a),e}();e.exports={LogLevelEnum:i,LogNumberLevel:o,LogMessageUtil:l,LogMessageEnum:u,getLogger:function(e){return new E(e)},setLogHandler:function(e){f=e},setLogLevel:function(e){c=void 0===e?i.ERROR:e},getLogLevel:function(){return c},LogManager:E,setLogColorMode:function(e){g=e,f.isColoredLogEnabled=g},getLogColorMode:function(){return g},globalLogHandler:f}},function(e,t){e.exports={BOLD:"[1m",CYAN:"[36m",GREEN:"[32m",LIGHTBLUE:"[94m",RED:"[31m",RESET:"[0m",WHITE:"[30m",YELLOW:"[33m"}},function(e,t){e.exports={DEBUG_MESSAGES:{CUSTOM_LOGGER_USED:"({file}): Custom logger used",GETTING_STORED_VARIATION:"({file}): Got stored variation for User ID:{userId} of Campaign:{campaignKey} as Variation:{variationName}, found in UserStorageService",GOT_FROM_CACHE:"({file}): Got data from cache for the finalKey:{finalKey}",GOT_VARIATION_FOR_USER:"({file}): User ID:{userId} for Campaign:{campaignKey} got variationName:{variationName} inside method:{method}",IMPRESSION_FOR_PUSH:"({file}): impression built for pushing - {properties}",IMPRESSION_FOR_TRACK_GOAL:"({file}): impression built for track-goal - {properties}",IMPRESSION_FOR_TRACK_USER:"({file}): impression built for track-user - {properties}",LOG_LEVEL_SET:"({file}): Log level set to {level}",NO_STORED_VARIATION:"({file}): No stored variation for User ID:{userId} for Campaign:{campaignKey} found in UserStorageService",NO_USER_STORAGE_SERVICE_GET:"({file}): No UserStorageService to get stored data",NO_USER_STORAGE_SERVICE_SET:"({file}): No UserStorageService to set data",RESET_CACHE:"({file}): Cache Reset on VWO instantiation",SDK_INITIALIZED:"({file}): SDK properly initialzed",SEGMENTATION_SKIPPED:"({file}): For userId:{userId} of Campaign:{campaignKey}, segment was missing, hence skipping segmentation{variation}",SEGMENTATION_STATUS:"({file}): For userId:{userId} of Campaign:{campaignKey} with variables:{customVariables} {status} {segmentationType} {variation}",SET_DEVELOPMENT_MODE:"({file}): DEVELOPMENT mode is ON",SET_IN_CACHE:"({file}): Set data in cache for the finalKey:{finalKey}",SETTINGS_FILE_PROCESSED:"({file}): Settings file processed",USER_HASH_BUCKET_VALUE:"({file}): User ID:{userId} having hash:{hashValue} got bucketValue:{bucketValue}",USER_NOT_PART_OF_Campaign:"({file}): userId:{userId} for Campaign:{campaignKey} did not become part of campaign, method:{method}",UUID_FOR_USER:"({file}): Uuid generated for User ID:{userId} and accountId:{accountId} is {desiredUuid}",VALID_CONFIGURATION:"({file}): SDK configuration and account settings are valid",VARIATION_HASH_BUCKET_VALUE:"({file}): User ID:{userId} for Campaign:{campaignKey} having percent traffic:{percentTraffic} got hash-value:{hashValue} and bucket value:{bucketValue}",WHITELISTING_SKIPPED:"({file}): For userId:{userId} of Campaign:{campaignKey}, whitelisting was skipped",STARTED_POLLING:"({file}): Polling of settings-file is registered with a periodic interval of {pollingInterval}ms",BATCH_EVENT_LIMIT_EXCEEDED:"({file}): Impression event - {endPoint} failed due to exceeding payload size. Parameter eventsPerRequest in batchEvents config in launch API has value:{eventsPerRequest} for accountId:{accountId}. Please read the official documentation for knowing the size limits",BULK_NOT_PROCESSED:"({file}): Batch events couldn't be received by VWO. Calling Flush Callback with error and data",BEFORE_FLUSHING:"({file}): Flushing events queue {manually} having {length} events for account:{accountId}. {timer}",FLUSH_EVENTS:"{{file}}: Manually flushing events for account:{accountId} having {queueLength} events",CAMPAIGN_NOT_ACTIVATED:"({file}): Campaign:{campaignKey} for User ID:{userId} is not yet activated for API:{api}. Use activate API to activate A/B test or isFeatureEnabled API to activate Feature Test."},ERROR_MESSAGES:{API_HAS_CORRUPTED_SETTINGS_FILE:'({file}): "{api}" API has corrupted settings-file. Please check or reach out to VWO support',ACTIVATE_API_MISSING_PARAMS:'({file}): "activate" API got bad parameters. It expects campaignKey(String) as first, userId(String) as second and options(optional Object) as third argument',CAMPAIGN_NOT_RUNNING:"({file}): API used:{api} - Campaign:{campaignKey} is not RUNNING. Please verify from VWO App",GET_FEATURE_VARIABLE_MISSING_PARAMS:'({file}): "getFeatureVariableValue" API got bad parameters. It expects campaignKey(String) as first, variableKey(String) as second, userId(String) as third, and options(optional Object) as fourth argument',GET_VARIATION_API_MISSING_PARAMS:'({file}): "getVariation" API got bad parameters. It expects campaignKey(String) as first, userId(String) as second and options(optional Object) as third argument',IMPRESSION_FAILED:"({file}): Impression event could not be sent to VWO - {endPoint}. Reason: {err}",INVALID_API:"({file}): {api} API is not valid for Campaign:{campaignKey} of type:{campaignType} for User ID:{userId}",INVALID_SETTINGS_FILE:"({file}): Settings-file fetched is not proper",IS_FEATURE_ENABLED_API_MISSING_PARAMS:'({file}): "isFeatureEnabled" API got bad parameters. It expects Campaign(String) as first, userId(String) as second and options(optional Object) as third argument',GET_USER_STORAGE_SERVICE_FAILED:"({file}): Getting data from UserStorageService failed for User ID:{userId}",SDK_CONFIG_CORRUPTED:"({file}): config passed to launch API is not a valid JSON object",PUSH_INVALID_PARAMS:'({file}): "{method}" API got bad parameters. It expects tagKey(String) as first, tagValue(String) as second and userId(String) as third argument',REGEX_CREATION_FAILED:"({file}): Regex cound not be processed",SET_USER_STORAGE_SERVICE_FAILED:"({file}): Saving data into UserStorageService failed for User ID:{userId}",SEGMENTATION_ERROR:"({file}): Error while segmenting the user:{userId} of Campaign:{campaignKey}{variation} with customVariables:{customVariables}. Error message: {err}",SETTINGS_FILE_CORRUPTED:"({file}): Settings file is corrupted. Please contact VWO Support for help",TAG_KEY_LENGTH_EXCEEDED:"({file}): Length of tagKey:{tagKey} for userID:{userId} can not be greater than 255",TAG_VALUE_LENGTH_EXCEEDED:"({file}): Length of value:{tagValue} of tagKey:{tagKey} for userID:{userId} can not be greater than 255",TRACK_API_GOAL_NOT_FOUND:"({file}): Goal:{goalIdentifier} not found for Campaign:{campaignKey} and userId:{userId}",TRACK_API_MISSING_PARAMS:'({file}): "track" API got bad parameters. It expects campaignKey(String or Array of strings or null or undefined) as first, userId(String) as second, goalIdentifier(String/Number) as third and options(optional Object) as fourth argument',TRACK_API_REVENUE_NOT_PASSED_FOR_REVENUE_GOAL:"({file}): Revenue value should be passed for revenue goal:{goalIdentifier} for Campaign:{campaignKey} and userId:{userId}",UNABLE_TO_CAST_VALUE:"({file}): Unable to cast value:{variableValue} to type:{variableType}, returning null",VARIABLE_NOT_FOUND:"({file}): Variable:{variableKey} for User ID:{userId} is not found in settings-file. Returning null",NO_CAMPAIGN_FOUND:"({file}): No campaign found for goalIdentifier:{goalIdentifier}. Please verify from VWO app.",POLLING_FAILED:"({file}): Failed fetching of Settings-file via polling for the accountId:{accountId}",POLLING_INTERVAL_INVALID:"({file}): pollingParameter provided is not of type number",SDK_KEY_NOT_PROVIVED:"({file}): sdkKey is required along with pollingInterval to poll the settings-file",SDK_KEY_NOT_STRING:"({file}): sdkKey provided is not of type string",INVALID_USER_ID:"({file}): Invalid userId:{userId} passed to {method} of this file",EVENT_BATCHING_NOT_OBJECT:"({file}): Batch events settings are not of type object",NO_BATCH_QUEUE:"{{file}}: No batch queue present for account:{accountId} when calling flushEvents API. Check batchEvents config in launch API"},INFO_MESSAGES:{FEATURE_ENABLED_FOR_USER:"({file}): Campaign:{campaignKey} for user ID:{userId} is enabled",FEATURE_NOT_ENABLED_FOR_USER:"({file}): Campaign:{campaignKey} for user ID:{userId} is not enabled",IMPRESSION_SUCCESS:"({file}): Impression event - {endPoint} was successfully received by VWO having main keys: accountId:{accountId}, User ID:{userId}, campaignId:{campaignId} and variationId:{variationId}",INVALID_VARIATION_KEY:"({file}): Variation was not assigned to User ID:{userId} for Campaign:{campaignKey}",GETTING_DATA_USER_STORAGE_SERVICE:"({file}): Getting data from UserStorageService for User ID:{userId} successful",SETTING_DATA_USER_STORAGE_SERVICE:"({file}): Setting data into UserStorageService for User ID:{userId} successful",SEGMENTATION_STATUS:"({file}): UserId:{userId} of Campaign:{campaignKey} with variables:{customVariables} {status} {segmentationType} {variation}",USER_GOT_NO_VARIATION:"({file}): User ID:{userId} for Campaign:{campaignKey} did not allot any variation",USER_RECEIVED_VARIABLE_VALUE:"({file}): Value for variable:{variableKey} of feature flag:{campaignKey} is:{variableValue} for user:{userId}",VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE:"({file}): Variable:{variableKey} is not used in variation:{variationName}. Returning default value",VARIATION_ALLOCATED:"({file}): User ID:{userId} of Campaign:{campaignKey} got variation:{variationName}",NO_VARIATION_ALLOCATED:"({file}): User ID:{userId} of Campaign:{campaignKey} did not get any variation",VARIATION_RANGE_ALLOCATION:"({file}): Campaign:{campaignKey} having variation:{variationName} with weight:{variationWeight} got range as: ( {start} - {end} ))",GOAL_ALREADY_TRACKED:'({file}): "Goal:{goalIdentifier} of Campaign:{campaignKey} for User ID:{userId} has already been tracked earlier. Skipping now',USER_ALREADY_TRACKED:'({file}): "User ID:{userId} for Campaign:{campaignKey} has already been tracked earlier for "{api}" API. Skipping now',POLLING_SUCCESS:"({file}): Settings-file fetched successfully via polling for the accountId:{accountId}",SETTINGS_FILE_UPDATED:"({file}): vwo-sdk instance is updated with the latest settings-file for the accountId:{accountId}",USER_ELIGIBILITY_FOR_CAMPAIGN:"({file}): Is User ID:{userId} part of campaign? {isUserPart}",GOT_VARIATION_FOR_USER:"({file}): userId:{userId} for campaign:{campaignTestKey} got variationName:{variationName}",BULK_IMPRESSION_SUCCESS:"({file}): Impression event - {endPoint} was successfully received by VWO having accountId:{a}",AFTER_FLUSHING:"({file}): Events queue having {length} events has been flushed {manually}",SETTINGS_NOT_UPDATED:"{{file}}: Settings-file fetched are same as earlier fetched settings",GOT_STORED_VARIATION:"({file}): Got stored variation for User ID:{userId} of Campaign:{campaignKey} as Variation:{variationName}, found in UserStorageService",CAMPAIGN_NOT_ACTIVATED:"({file}): Activate the campaign:{campaignKey} for User ID:{userId} to {reason}."},WARNING_MESSAGES:{}}},function(e,t,r){var n=r(2),a=/\{([0-9a-zA-Z_]+)\}/g,i={build:function(e,t){try{return e.replace(a,(function(r,a,i){var o;if("{"===e[i-1]&&"}"===e[i+r.length])return a;if(t.hasOwnProperty(a)){var u=t[a];n.isFunction(u)&&(u=t[a]()),o=u}else o=null;return null==o?"":o}))}catch(t){return e}}};e.exports=i},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(5).getCurrentTime,i=r(13),o=i.LogLevelEnum,u=i.LogLevelInfoEnum,l=i.LogLevelColorInfoEnum,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logLevel=o.NOTSET,this.prefix="VWO-SDK",this.isColoredLogEnabled=!1}var t,r,i;return t=e,(r=[{key:"log",value:function(e,t){var r;this.shouldLog(e)&&(r=this.isColoredLogEnabled?"".concat(this.prefix," - ").concat(l[e]," ").concat(a()," ").concat(t):"".concat(this.prefix," - ").concat(u[e]," ").concat(a()," ").concat(t),this.consoleLog(e,[r]))}},{key:"shouldLog",value:function(e){return e>=this.logLevel}},{key:"setLogLevel",value:function(e){this.logLevel=void 0===e?o.ERROR:e}},{key:"consoleLog",value:function(e,t){switch(e){case o.INFO:console.info.apply(console,t);break;case o.WARN:console.warn.apply(console,t);break;case o.ERROR:console.error.apply(console,t);break;default:console.log.apply(console,t)}}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=s},function(e,t){e.exports={PASSED:"passed",FAILED:"failed"}},function(e,t,r){var n=r(15),a=r(10).getKeyValue,i=r(38),o=i.operandCustomVariablesParser,u=i.operandUserParser,l=r(0),s=r(2),c=r(1),g=n.SegmentOperatorTypes,f=g.AND,E=g.OR,d=g.NOT,p=n.SegmentOperandTypes,v=p.CUSTOM_VARIABLE,S=p.USER,R=l.LogLevelEnum,_=l.LogMessageEnum,A=l.LogMessageUtil,I=c.SegmentEvaluator,y=l.getLogger();e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";try{return s.isObject(e)&&!Object.keys(e).length?(y.log(R.DEBUG,A.build(_.DEBUG_MESSAGES.SEGMENTATION_SKIPPED,{campaignKey:r,userId:n,file:I})),!0):!s.isObject(e)||!Object.keys(e).length||function e(t,r){var n=a(t),i=n.key,l=n.value;var s=i;var c=l;if(s===d)return!e(c,r);if(s===f){for(var g=[],p=0;p<c.length;p++)g.push(e(c[p],r));return g.every((function(e){return e}))}if(s===E){for(var R=[],_=0;_<c.length;_++)R.push(e(c[_],r));return R.some((function(e){return e}))}if(s===v)return o(c,r);if(s===S)return u(c,r)}(e,t)}catch(e){return y.log(R.ERROR,A.build(_.ERROR_MESSAGES.SEGMENTATION_ERROR,{campaignKey:r,userId:n,customVariables:JSON.stringify(t),file:I,err:e,variation:i})),!1}}},function(e,t){e.exports={CUSTOM_VARIABLE:"custom_variable",USER:"user"}},function(e,t){e.exports={AND:"and",NOT:"not",OR:"or"}},function(e,t){e.exports={LOWER:/^lower/,LOWER_MATCH:/^lower\((.*)\)/,WILDCARD:/^wildcard/,WILDCARD_MATCH:/^wildcard\((.*)\)/,REGEX:/^regex/,REGEX_MATCH:/^regex\((.*)\)/,STARTING_STAR:/^\*/,ENDING_STAR:/\*$/}},function(e,t){e.exports={LOWER_VALUE:1,STARTING_ENDING_STAR_VALUE:2,STARTING_STAR_VALUE:3,ENDING_STAR_VALUE:4,REGEX_VALUE:5,EQUAL_VALUE:6}},function(e,t,r){var n=r(2),a=r(5).matchWithRegex,i=r(10).getKeyValue,o=r(15),u=o.SegmentOperandValueTypeRegexes,l=u.LOWER_MATCH,s=u.WILDCARD_MATCH,c=u.REGEX_MATCH,g=u.STARTING_STAR,f=u.ENDING_STAR,E=o.SegmentOperandValues,d=E.LOWER_VALUE,p=E.STARTING_ENDING_STAR_VALUE,v=E.STARTING_STAR_VALUE,S=E.ENDING_STAR_VALUE,R=E.REGEX_VALUE,_=E.EQUAL_VALUE;function A(e,t){return a(e,t)&&a(e,t)[1]}function I(e,t){var r=parseFloat(e,10),n=parseFloat(t,10);return r&&n?(r===Math.floor(r)&&(r=parseInt(r,10)),n===Math.floor(n)&&(n=parseInt(n,10)),{operandValue:r.toString(),tagValue:n.toString()}):{operandValue:e,tagValue:t}}function y(e){return void 0===e&&(e=""),n.isBoolean(e)&&(e=!!e),null!==e&&(e=e.toString()),e}function b(e){var t,r,n,i;return a(e,l)?(t=d,r=A(e,l)):a(e,s)?(r=A(e,s),n=a(r,g),i=a(r,f),n&&i?t=p:n?t=v:i&&(t=S),r=r.replace(g,"").replace(f,"")):a(e,c)?(t=R,r=A(e,c)):(t=_,r=e),{operandType:t,operandValue:r}}e.exports={extractOperandValue:A,processValues:I,preProcessTagValue:y,preProcessOperandValue:b,operandCustomVariablesParser:function(e,t){var r=i(e),n=r.key,a=n;if(e=r.value,!t.hasOwnProperty(n))return!1;var o=t[a];o=y(o);var u=b(e),l=u.operandType,s=I(u.operandValue,o);return o=s.tagValue,function(e,t,r){var n;switch(e){case d:null!==r&&(n=t.toLowerCase()===r.toLowerCase());break;case p:null!==r&&(n=r.indexOf(t)>-1);break;case v:null!==r&&(n=r.endsWith(t));break;case S:null!==r&&(n=r.startsWith(t));break;case R:try{var a=new RegExp(t,"g");n=!!a.test(r)}catch(e){n=!1}break;default:n=r===t}return n}(l,s.operandValue,o)},operandUserParser:function(e,t){for(var r=e.split(","),n=0;n<r.length;n++)if(r[n].trim()===t._vwoUserId)return!0;return!1}}},function(e,t){e.exports={DECISION_TYPES:{CAMPAIGN_DECISION:"CAMPAIGN_DECISION"}}},function(e,t,r){var n=r(41),a=r(43);e.exports=n("v5",80,a)},function(e,t,r){var n=r(42);e.exports=function(e,t,r){var a=function(e,a,i,o){var u=i&&o||0;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e)),"string"==typeof a&&(a=function(e){var t=[];return e.replace(/[a-fA-F0-9]{2}/g,(function(e){t.push(parseInt(e,16))})),t}(a)),!Array.isArray(e))throw TypeError("value must be an array of bytes");if(!Array.isArray(a)||16!==a.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var l=r(a.concat(e));if(l[6]=15&l[6]|t,l[8]=63&l[8]|128,i)for(var s=0;s<16;++s)i[u+s]=l[s];return i||n(l)};try{a.name=e}catch(e){}return a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",a}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,a=r;return[a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],"-",a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]],a[e[n++]]].join("")}},function(e,t,r){"use strict";function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function a(e,t){return e<<t|e>>>32-t}e.exports=function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var i=unescape(encodeURIComponent(e));e=new Array(i.length);for(var o=0;o<i.length;o++)e[o]=i.charCodeAt(o)}e.push(128);var u=e.length/4+2,l=Math.ceil(u/16),s=new Array(l);for(o=0;o<l;o++){s[o]=new Array(16);for(var c=0;c<16;c++)s[o][c]=e[64*o+4*c]<<24|e[64*o+4*c+1]<<16|e[64*o+4*c+2]<<8|e[64*o+4*c+3]}for(s[l-1][14]=8*(e.length-1)/Math.pow(2,32),s[l-1][14]=Math.floor(s[l-1][14]),s[l-1][15]=8*(e.length-1)&4294967295,o=0;o<l;o++){for(var g=new Array(80),f=0;f<16;f++)g[f]=s[o][f];for(f=16;f<80;f++)g[f]=a(g[f-3]^g[f-8]^g[f-14]^g[f-16],1);var E=r[0],d=r[1],p=r[2],v=r[3],S=r[4];for(f=0;f<80;f++){var R=Math.floor(f/20),_=a(E,5)+n(R,d,p,v)+S+t[R]+g[f]>>>0;S=v,v=p,p=a(d,30)>>>0,d=E,E=_}r[0]=r[0]+E>>>0,r[1]=r[1]+d>>>0,r[2]=r[2]+p>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+S>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}},function(e,t,r){var n=r(3),a=r(6),i=r(8),o=r(7),u=r(4),l=r(2),s=r(0),c=r(1),g=s.LogLevelEnum,f=s.LogMessageEnum,E=s.LogMessageUtil,d=c.GetVariation;e.exports=function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=a.GET_VARIATION_NAME,p=!1;if(l.isObject(s)){var v=s.customVariables,S=s.variationTargetingVariables,R=s.userStorageData,_=s.metaData;u.areValidParamsForAPIMethod({method:a.GET_VARIATION_NAME,campaignKey:t,userId:r,customVariables:v,variationTargetingVariables:S,userStorageData:R,metaData:_})&&(p=!0)}if(!1===p)return e.logger.log(g.ERROR,E.build(f.ERROR_MESSAGES.GET_VARIATION_API_MISSING_PARAMS,{file:d})),null;var A=e.SettingsFileManager.getConfig(),I=e.SettingsFileManager.getSettingsFile(c);if(A.apiName=c,!I)return null;var y=o.getCampaign(I,t);if(!y||y.status!==n.STATUS_RUNNING)return e.logger.log(g.ERROR,E.build(f.ERROR_MESSAGES.CAMPAIGN_NOT_RUNNING,{file:d,campaignKey:t,api:c})),null;if(o.isFeatureRolloutCampaign(y))return e.logger.log(g.ERROR,E.build(f.ERROR_MESSAGES.INVALID_API,{file:d,campaignKey:t,campaignType:y.type,userId:r,api:c})),null;var b=i.getVariation(A,I,y,t,r,v,S,R,_,!1,void 0,c).variationName;return b||null}},function(e,t,r){var n=r(3),a=r(9),i=r(6),o=r(8),u=r(7),l=r(10).objectValues,s=r(11),c=r(4),g=r(2),f=r(0),E=r(1),d=f.LogLevelEnum,p=f.LogMessageEnum,v=f.LogMessageUtil,S=E.Track,R=a.ALL,_="_vwo_",A=i.TRACK;e.exports=function(e,t,r,f){var E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},I=!1;if(g.isObject(E)){var y=E.revenueValue,b=E.customVariables,O=E.variationTargetingVariables,m=E.userStorageData,T=E.goalTypeToTrack,h=E.shouldTrackReturningUser,N=E.metaData;c.areValidParamsForAPIMethod({method:i.TRACK,campaignKey:t,userId:r,goalIdentifier:f,customVariables:b,variationTargetingVariables:O,userStorageData:m,goalTypeToTrack:T,shouldTrackReturningUser:h,metaData:N})&&(!T||T&&l(a).includes(T))&&(I=!0)}if(!1===I)return e.logger.log(d.ERROR,v.build(p.ERROR_MESSAGES.TRACK_API_MISSING_PARAMS,{file:S})),null;var U=e.SettingsFileManager.getConfig(),L=e.SettingsFileManager.getSettingsFile(A);if(U.apiName=A,!L)return null;var V=[];if(T=T||U.goalTypeToTrack||R,g.isUndefined(h)&&(h=!!g.isBoolean(U.shouldTrackReturningUser)&&U.shouldTrackReturningUser),g.isString(t)){var G=u.getCampaign(L,t);V.push(G||{key:t})}else V=g.isArray(t)?u.getCampaignsForKeys(L,t):u.getCampaignsForGoal(L,f,T);var D={};return V.forEach((function(t){return D[t.key]=function(e,t,r,i,l,g,f,E,I,y,b,O,m,T){if(!t||t.status!==n.STATUS_RUNNING)return e.logger.log(d.ERROR,v.build(p.ERROR_MESSAGES.CAMPAIGN_NOT_RUNNING,{file:S,campaignKey:r,api:A})),!1;if(u.isFeatureRolloutCampaign(t))return e.logger.log(d.ERROR,v.build(p.ERROR_MESSAGES.INVALID_API,{file:S,campaignKey:r,campaignType:t.type,userId:i,api:A})),!1;var h=t.id,N=u.getCampaignGoal(l,t.key,g);if(!N)return e.logger.log(d.ERROR,v.build(p.ERROR_MESSAGES.TRACK_API_GOAL_NOT_FOUND,{file:S,userId:i,goalIdentifier:g,campaignKey:r})),!1;if(O!==R&&N.type!==O)return!1;if(N.type===a.REVENUE&&!c.isValidValue(f))return e.logger.log(d.ERROR,v.build(p.ERROR_MESSAGES.TRACK_API_REVENUE_NOT_PASSED_FOR_REVENUE_GOAL,{file:S,userId:i,goalIdentifier:g,campaignKey:r})),!1;var U=o.getVariation(E,l,t,r,i,I,y,b,T,!1,g,A),L=U.variationId,V=U.variationName,G=U.storedGoalIdentifier;if(V){if(G)if(G.split(_).includes(g)){if(!m)return e.logger.log(d.INFO,v.build(p.INFO_MESSAGES.GOAL_ALREADY_TRACKED,{file:S,userId:i,goalIdentifier:g,campaignKey:r})),!1}else G+=_+g,o._saveUserData(E,t,V,i,T,G);if(E.batchEvents){var D=s.buildBatchEventForTrackingGoal(l,h,L,i,N,f);e.batchEventsQueue.enqueue(D)}else{var F=s.buildEventForTrackingGoal(l,h,L,i,N,f);e.eventQueue.process(E,F,e)}return o._saveUserData(E,t,V,i,T,g),!0}return!1}(e,t,t.key,r,L,f,y,U,b,O,m,T,h,N)})),Object.keys(D).length?D:null}},function(e,t,r){var n=r(3),a=r(6),i=r(8),o=r(7),u=r(11),l=r(4),s=r(2),c=r(0),g=r(1),f=c.LogLevelEnum,E=c.LogMessageEnum,d=c.LogMessageUtil,p=g.IsFeatureEnabled;e.exports=function(e,t,r){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},g=a.IS_FEATURE_ENABLED,v=!1;if(s.isObject(c)){var S=c.customVariables,R=c.variationTargetingVariables,_=c.userStorageData,A=c.shouldTrackReturningUser,I=c.metaData;l.areValidParamsForAPIMethod({method:a.IS_FEATURE_ENABLED,campaignKey:t,userId:r,customVariables:S,variationTargetingVariables:R,userStorageData:_,shouldTrackReturningUser:A,metaData:I})&&(v=!0)}if(!1===v)return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.IS_FEATURE_ENABLED_API_MISSING_PARAMS,{file:p})),!1;var y=e.SettingsFileManager.getConfig(),b=e.SettingsFileManager.getSettingsFile(g);if(!b)return!1;A=A||y.shouldTrackReturningUser||!1;var O=o.getCampaign(b,t);if(!O||O.status!==n.STATUS_RUNNING)return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.CAMPAIGN_NOT_RUNNING,{file:p,campaignKey:t,api:g})),!1;if(o.isAbCampaign(O))return e.logger.log(f.ERROR,d.build(E.ERROR_MESSAGES.INVALID_API,{file:p,campaignKey:t,campaignType:O.type,userId:r,api:g})),!1;var m=i.getVariation(y,b,O,t,r,S,R,_,I,!0,void 0,g),T=m.variation,h=m.variationName,N=m.variationId,U=m.isStoredVariation,L=!1;if(h&&o.isFeatureTestCampaign(O))if(L=T.isFeatureEnabled,U&&!A)e.logger.log(f.INFO,d.build(E.INFO_MESSAGES.USER_ALREADY_TRACKED,{file:p,userId:r,campaignKey:t,api:g}));else if(y.batchEvents){var V=u.buildBatchEventForTrackingUser(b,O.id,N,r);e.batchEventsQueue.enqueue(V)}else{var G=u.buildEventForTrackingUser(b,O.id,N,r);e.eventQueue.process(y,G,e)}else h&&o.isFeatureRolloutCampaign(O)&&(L=!0);return L?e.logger.log(f.INFO,d.build(E.INFO_MESSAGES.FEATURE_ENABLED_FOR_USER,{file:p,campaignKey:t,userId:r})):e.logger.log(f.INFO,d.build(E.INFO_MESSAGES.FEATURE_NOT_ENABLED_FOR_USER,{file:p,campaignKey:t,userId:r})),L}},function(e,t,r){var n=r(3),a=r(6),i=r(8),o=r(7),u=r(4),l=r(48),s=r(2),c=r(10),g=r(0),f=r(1),E=g.LogLevelEnum,d=g.LogMessageEnum,p=g.LogMessageUtil,v=f.GetFeatureVariableValue;e.exports=function(e,t,r,g){var f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};try{var S=a.GET_FEATURE_VARIABLE_VALUE,R=!1;if(s.isObject(f)){var _=f.customVariables,A=f.variationTargetingVariables,I=f.userStorageData,y=f.metaData;u.areValidParamsForAPIMethod({method:a.GET_FEATURE_VARIABLE_VALUE,campaignKey:t,variableKey:r,userId:g,customVariables:_,variationTargetingVariables:A,userStorageData:I,metaData:y})&&(R=!0)}if(!1===R)return e.logger.log(E.ERROR,p.build(d.ERROR_MESSAGES.GET_FEATURE_VARIABLE_MISSING_PARAMS,{file:v,campaignKey:t,variableKey:r})),null;var b=e.SettingsFileManager.getConfig(),O=e.SettingsFileManager.getSettingsFile(S);if(b.apiName=S,!O)return null;var m,T=o.getCampaign(O,t);if(!T||T.status!==n.STATUS_RUNNING)return e.logger.log(E.ERROR,p.build(d.ERROR_MESSAGES.CAMPAIGN_NOT_RUNNING,{file:v,campaignKey:t,api:S})),null;if(o.isAbCampaign(T))return e.logger.log(E.ERROR,p.build(d.ERROR_MESSAGES.INVALID_API,{file:v,campaignKey:t,campaignType:T.type,userId:g,api:S})),null;var h=i.getVariation(b,O,T,t,g,_,A,I,y,!1,void 0,S),N=h.variation,U=h.variationName;if(!U)return e.logger.log(E.INFO,p.build(d.INFO_MESSAGES.FEATURE_NOT_ENABLED_FOR_USER,{file:v,campaignKey:t,userId:g})),null;if(o.isFeatureRolloutCampaign(T)?m=l.getVariableForFeature(T,r):o.isFeatureTestCampaign(T)&&(m=l.getVariableValueForVariation(T,N,r),c.areObjectKeys(m)&&N.isFeatureEnabled?e.logger.log(E.INFO,p.build(d.INFO_MESSAGES.USER_RECEIVED_VARIABLE_VALUE,{file:v,variableKey:r,campaignKey:T.key,variableValue:m.value,userId:g})):c.areObjectKeys(m)&&!N.isFeatureEnabled&&e.logger.log(E.INFO,p.build(d.INFO_MESSAGES.VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE,{file:v,variableKey:r,variationName:U}))),!c.areObjectKeys(m))return e.logger.log(E.ERROR,p.build(d.ERROR_MESSAGES.VARIABLE_NOT_FOUND,{file:v,variableKey:r,userId:g})),null;var L=m.value;return l.getTypeCastVariableValue(L,m.type)}catch(t){return e.logger.log(E.ERROR,t.message),null}}},function(e,t,r){var n=r(7),a=r(2),i=r(49),o=r(0),u=r(1),l=o.LogLevelEnum,s=o.LogMessageEnum,c=o.LogMessageUtil,g=o.getLogger(),f=u.FeatureUtil,E={getVariableForFeature:function(e,t){var r={};if(n.isFeatureRolloutCampaign(e)){for(var a=e.variables||[],i=0;i<a.length;i++)if(a[i].key===t){r=a[i];break}return r}return r},getVariableValueForVariation:function(e,t,r){var a={};if(n.isFeatureTestCampaign(e)){if(!t||!t||!t.variables)return a;t.isFeatureEnabled||(t=n.getControlForCampaign(e));for(var i=0;i<t.variables.length;i++){var o=t.variables[i];if(r===o.key){a=o;break}}}return a},getTypeCastVariableValue:function(e,t){var r;switch(t){case i.INTEGER:r=parseInt(e,10),a.isNumber(r)&&!isNaN(r)||(g.log(l.ERROR,c.build(s.ERROR_MESSAGES.UNABLE_TO_CAST_VALUE,{file:f,variableValue:e,variableType:t})),r=null);break;case i.DOUBLE:r=parseFloat(e),a.isNumber(r)&&!isNaN(r)||(g.log(l.ERROR,c.build(s.ERROR_MESSAGES.UNABLE_TO_CAST_VALUE,{file:f,variableValue:e,variableType:t})),r=null);break;case i.BOOLEAN:a.isBoolean(e)?r=e:(g.log(l.ERROR,c.build(s.ERROR_MESSAGES.UNABLE_TO_CAST_VALUE,{file:f,variableValue:e,variableType:t})),r=null);break;default:r=e}return r}};e.exports=E},function(e,t){e.exports={BOOLEAN:"boolean",DOUBLE:"double",INTEGER:"integer",STRING:"string"}},function(e,t,r){var n=r(6),a=r(0),i=r(1),o=r(4),u=r(11),l=a.LogLevelEnum,s=a.LogMessageEnum,c=a.LogMessageUtil,g=i.Push;e.exports=function(e,t,r,a){var i=n.PUSH;if(!o.areValidParamsForAPIMethod({method:n.PUSH,tagKey:t,tagValue:r,userId:a}))return e.logger.log(l.ERROR,c.build(s.ERROR_MESSAGES.PUSH_INVALID_PARAMS,{file:g,method:i})),!1;if(t.length>255)return e.logger.log(l.ERROR,c.build(s.ERROR_MESSAGES.TAG_KEY_LENGTH_EXCEEDED,{file:g,tagKey:t,userId:a})),!1;if(r.length>255)return e.logger.log(l.ERROR,c.build(s.ERROR_MESSAGES.TAG_VALUE_LENGTH_EXCEEDED,{file:g,tagKey:t,userId:a,tagValue:r})),!1;var f=e.SettingsFileManager.getConfig(),E=e.SettingsFileManager.getSettingsFile(i);if(!E)return!1;if(f.batchEvents){var d=u.buildBatchEventForPushing(E,t,r,a);e.batchEventsQueue.enqueue(d)}else{var p=u.buildEventForPushing(E,t,r,a);e.eventQueue.process(f,p,e)}return!0}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(2),i=r(52),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.running=!1,this.queue=[]}var t,r,o;return t=e,(r=[{key:"process",value:function(e,t,r){e&&e.isDevelopmentMode||this.enqueue(t,r)}},{key:"enqueue",value:function(e,t){return this.queue.push({eventName:e.eventName,properties:e,callback:function(){i.dispatch(e,(function(){}))}}),t.eventQueue.executeNext(e),this.running||this.executeNext(e),this}},{key:"executeNext",value:function(e){if(this.running=!1,this.queue&&this.queue.length){var t=this.queue.shift();t&&(this.running=!0,t.callback&&a.isFunction(t.callback)&&t.callback(e))}}}])&&n(t.prototype,r),o&&n(t,o),e}();e.exports=o},function(e,t,r){var n=r(0),a=r(1),i=n.LogLevelEnum,o=n.LogMessageEnum,u=n.LogMessageUtil,l=n.getLogger(),s=r(5),c=["url"],g={dispatch:function(e,t){var n,g="?";g+=s.convertObjectKeysToString(e,c);try{n=new URL(e.url),r(53).sendCall(n,g)}catch(t){var f=e.url;l.log(i.ERROR,u.build(o.ERROR_MESSAGES.IMPRESSION_FAILED,{file:a.EventDispatcher,endPoint:f,err:t}))}return!1}};e.exports=g},function(e,t){var r=function(){},n={sendCall:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="https://".concat(e.host).concat(e.pathname).concat(t),i=n.successCallback,o=n.errorCallback,u=!1,l=new Image;i=i||r,o=o||r,l.onload=function(){u||(u=!0,i())},l.onerror=function(){u||(u=!0,o())},l.src=a}};e.exports=n},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(55),i=r(7),o=r(5),u=r(19),l=r(0),s=r(1),c=l.LogLevelEnum,g=l.LogMessageEnum,f=l.LogMessageUtil,E=s.SettingsFileManager,d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t?(t.settingsFile&&!t.settingsFile.campaigns&&(t.settingsFile.campaigns=[]),this._configObj=t,this._clonedSettingsFile=t.settingsFile?o.cloneObject(t.settingsFile):null):(this._configObj=null,this._clonedSettingsFile=null)}var t,r,l;return t=e,(r=[{key:"_setVariationBucketing",value:function(e){i.setVariationAllocation(e)}},{key:"isSettingsFileValid",value:function(){return!(!this._configObj||!this._clonedSettingsFile||!a.test(this._clonedSettingsFile)&&(this._configObj.logger.log(c.ERROR,f.build(g.ERROR_MESSAGES.SETTINGS_FILE_CORRUPTED,{file:E})),1))}},{key:"checkAndPoll",value:function(){var e=this;if(this._configObj.pollingInterval&&this._configObj.sdkKey){var t=JSON.stringify(this._clonedSettingsFile);setInterval((function(){u.get(e._clonedSettingsFile.accountId,e._configObj.sdkKey).then((function(r){e._configObj.logger.log(c.INFO,f.build(g.INFO_MESSAGES.POLLING_SUCCESS,{file:E,accountId:e._clonedSettingsFile.accountId}));var n=JSON.stringify(r);n!==t?(t=n,e.updateSettingsFile(r),e._configObj.logger.log(c.INFO,f.build(g.INFO_MESSAGES.SETTINGS_FILE_UPDATED,{file:E,accountId:e._clonedSettingsFile.accountId}))):e._configObj.logger.log(c.INFO,f.build(g.INFO_MESSAGES.SETTINGS_NOT_UPDATED,{file:E,accountId:e._clonedSettingsFile.accountId}))})).catch((function(t){e._configObj.logger.log(c.ERROR,f.build(g.ERROR_MESSAGES.POLLING_FAILED,{file:E,accountId:e._clonedSettingsFile.accountId}))}))}),this._configObj.pollingInterval),this._configObj.logger.log(c.DEBUG,f.build(g.DEBUG_MESSAGES.STARTED_POLLING,{file:E,pollingInterval:this._configObj.pollingInterval}))}}},{key:"processSettingsFile",value:function(){for(var e=this._clonedSettingsFile,t=0;t<e.campaigns.length;t++){var r=e.campaigns[t];this._setVariationBucketing(r)}return this._configObj.logger.log(c.DEBUG,f.build(g.DEBUG_MESSAGES.SETTINGS_FILE_PROCESSED,{file:E})),e}},{key:"getAndUpdateSettingsFile",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._clonedSettingsFile.accountId,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._clonedSettingsFile.sdkKey;return new Promise((function(n,a){u.get(t,r,{isViaWebhook:!0}).then((function(t){e.updateSettingsFile(t),n(t)})).catch((function(e){}))}))}},{key:"updateSettingsFile",value:function(e){this._clonedSettingsFile=o.cloneObject(e),this.processSettingsFile()}},{key:"getConfig",value:function(){return this._configObj}},{key:"getSettingsFile",value:function(e){return this._clonedSettingsFile||this._configObj.logger.log(c.ERROR,f.build(g.ERROR_MESSAGES.API_HAS_CORRUPTED_SETTINGS_FILE,{file:E,api:e})),this._clonedSettingsFile}}])&&n(t.prototype,r),l&&n(t,l),e}();e.exports=d},function(e,t,r){var n=r(56),a=n.superstruct,i=n.struct;function o(e,t){return"[object Object]"===Object.prototype.toString.call(e)?i({}).test(e):"[object Array]"===Object.prototype.toString.call(e)&&t.test(e)}var u=(i=a({types:{variationsType:function(e){return o(e,s)},goalsType:function(e){return o(e,u)},variablesType:function(e){return o(e,l)},campaignsType:function(e){return o(e,c)}}}))([{id:"number|string",identifier:"string",type:"string"}]),l=i([{id:"number|string",type:"string",key:"string",value:"number|string|boolean"}]),s=i([{id:"number|string",name:"string",weight:"number|string",changes:"object?",segments:"object?",variables:"variablesType?",isFeatureEnabled:"boolean?",startVariationAllocation:"number?",endVariationAllocation:"number?"}]),c=i([{id:"number|string",type:"string",key:"string",status:"string",percentTraffic:"number",goals:"goalsType",variations:"variationsType",variables:"variablesType?",segments:"object",isForcedVariationEnabled:"boolean?"}]),g=i({sdkKey:"string?",version:"number|string",accountId:"number|string",campaigns:"campaignsType"});e.exports=g},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,r){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&u(a,r.prototype),a}).apply(null,arguments)}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return l(e,arguments,o(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)})(e)}r.r(t),r.d(t,"StructError",(function(){return S})),r.d(t,"Types",(function(){return E})),r.d(t,"isStruct",(function(){return _})),r.d(t,"struct",(function(){return b})),r.d(t,"superstruct",(function(){return y}));var c=Object.prototype.toString,g=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;if("boolean"===t)return"boolean";if("string"===t)return"string";if("number"===t)return"number";if("symbol"===t)return"symbol";if("function"===t)return"GeneratorFunction"===f(e)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(e))return"array";if(function(e){if(e.constructor&&"function"==typeof e.constructor.isBuffer)return e.constructor.isBuffer(e);return!1}(e))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}(e))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(e))return"regexp";switch(f(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(e))return"generator";switch(t=c.call(e)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")};function f(e){return e.constructor?e.constructor.name:null}var E={any:function(e){return void 0!==e},arguments:function(e){return"arguments"===g(e)},array:function(e){return"array"===g(e)},boolean:function(e){return"boolean"===g(e)},buffer:function(e){return"buffer"===g(e)},date:function(e){return"date"===g(e)&&!isNaN(e)},error:function(e){return"error"===g(e)},float32array:function(e){return"float32array"===g(e)},float64array:function(e){return"float64array"===g(e)},function:function(e){return"function"===g(e)},generatorfunction:function(e){return"generatorfunction"===g(e)},int16array:function(e){return"int16array"===g(e)},int32array:function(e){return"int32array"===g(e)},int8array:function(e){return"int8array"===g(e)},map:function(e){return"map"===g(e)},null:function(e){return"null"===g(e)},number:function(e){return"number"===g(e)},object:function(e){return"object"===g(e)},promise:function(e){return"promise"===g(e)},regexp:function(e){return"regexp"===g(e)},set:function(e){return"set"===g(e)},string:function(e){return"string"===g(e)},symbol:function(e){return"symbol"===g(e)},uint16array:function(e){return"uint16array"===g(e)},uint32array:function(e){return"uint32array"===g(e)},uint8array:function(e){return"uint8array"===g(e)},uint8clampedarray:function(e){return"uint8clampedarray"===g(e)},undefined:function(e){return"undefined"===g(e)},weakmap:function(e){return"weakmap"===g(e)},weakset:function(e){return"weakset"===g(e)}},d=!0,p="Invariant failed";function v(e,t){if(!e)throw d?new Error(p):new Error(p+": "+(t||""))}var S=function(e){var t,r;function n(t){var r;v(t.length>0,"StructError requires being passed a failure, but received: "+t);var a=t[0],i=a.path,o=a.value,u=a.type,l=a.branch,s=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(a,["path","value","type","branch"]),c="Expected a value of type `"+u+"`"+(i.length?" for `"+i.join(".")+"`":"")+" but received `"+JSON.stringify(o)+"`.";return(r=e.call(this,c)||this).type=u,r.value=o,Object.assign(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r),s),r.path=i,r.branch=l,r.failures=t,r.stack=(new Error).stack,r.__proto__=n.prototype,r}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n}(s(TypeError)),R=Symbol("STRUCT"),_=function(e){return"function"==typeof e&&e[R]},A=function(e){var t=e.struct.Error,r=function e(t){return e.assert(t)};return Object.defineProperty(r,R,{value:!0}),r.kind=e.kind,r.type=e.type,r.default=function(){return"function"==typeof e.defaults?e.defaults():e.defaults},r.test=function(e){return!r.check(e,[e],[])[0]},r.assert=function(e){var n=r.check(e,[e],[]),a=n[0],i=n[1];if(a)throw new t(a);return i},r.validate=function(e){var n=r.check(e,[e],[]),a=n[0],i=n[1];return a?[new t(a)]:[void 0,i]},r.check=function(e,t,n){return void 0===e&&(e=r.default()),[[r.fail({value:e,branch:t,path:n})]]},r.fail=function(e){return i({},e,{type:"type"in e?e.type:r.type})},r},I=function(e,t,r){v(Array.isArray(e)&&0!==e.length,"Union structs must be defined as a non-empty array, but you passed: "+e);var n=e.map((function(e){return r(e)})),a=n.map((function(e){return e.type})).join(" | "),i=A({kind:"union",type:a,defaults:t,struct:r});return i.check=function(e,t,r){void 0===e&&(e=i.default());var a=n,o=Array.isArray(a),u=0;for(a=o?a:a[Symbol.iterator]();;){var l;if(o){if(u>=a.length)break;l=a[u++]}else{if((u=a.next()).done)break;l=u.value}var s=l.check(e,t,r),c=s[0],g=s[1];if(!c)return[void 0,g]}return[[i.fail({value:e,branch:t,path:r})]]},i},y=function(e){void 0===e&&(e={});var t=function e(t,r){return function(e,t,r){if(_(e))return e;if(Array.isArray(e)){if(1===e.length){var n=e[0];return r.array([n],t)}if(e.length>1)return r.tuple(e,t)}if("function"==typeof e)return r.function(e,t);if("object"==typeof e)return r.object(e,t);if("string"==typeof e){var a,i=!1;if(e.endsWith("?")&&(i=!0,e=e.slice(0,-1)),e.includes("|")){var o=e.split(/\s*\|\s*/g);a=r.union(o,t)}else if(e.includes("&")){var u=e.split(/\s*&\s*/g);a=r.intersection(u,t)}else a=r.scalar(e,t);return i&&(a=r.union([a,"undefined"],void 0)),a}throw new Error("A schema definition must be an object, array, string or function, but you passed: "+e)}(t,r,e)};return t.array=function(e,r){return function(e,t,r){v(Array.isArray(e)&&1===e.length,"Array structs must be defined as an array with one element, but you passed: "+e);var n=r(e[0],void 0),a=A({kind:"array",type:n.type+"[]",defaults:t,struct:r});return a.check=function(e,t,r){if(void 0===e&&(e=a.default()),!Array.isArray(e))return[[a.fail({value:e,branch:t,path:r})]];for(var i=[],o=[],u=0;u<e.length;u++){var l=e[u],s=n.check(l,t.concat(l),r.concat(u)),c=s[0],g=s[1];c?o.push.apply(o,c):i[u]=g}return o.length?[o]:[void 0,i]},a}(e,r,t)},t.dynamic=function(e,r){return function(e,t,r){v("function"==typeof e,"Dynamic structs must be defined as a function, but you passed: "+e);var n=A({kind:"dynamic",type:"dynamic<…>",defaults:t,struct:r});return n.check=function(t,r,a){return void 0===t&&(t=n.default()),e(t,r,a).check(t,r,a)},n}(e,r,t)},t.enum=function(e,r){return function(e,t,r){v(Array.isArray(e),"Enum structs must be defined as an array, but you passed: "+e);var n=r((function(t){return e.includes(t)}),t);return n.kind="enum",n.type=e.map((function(e){return"string"==typeof e?'"'+e+'"':""+e})).join(" | "),n}(e,r,t)},t.function=function(e,r){return function(e,t,r){var n=A({kind:"function",type:"function<…>",defaults:t,struct:r});return n.check=function(t,r,a){void 0===t&&(t=n.default());var o=e(t,r,a);if(!0===o)return[void 0,t];var u=[];if(!1===o)u.push(n.fail({value:t,branch:r,path:a}));else if(Array.isArray(o)&&o.length>0){var l=o,s=Array.isArray(l),c=0;for(l=s?l:l[Symbol.iterator]();;){var g;if(s){if(c>=l.length)break;g=l[c++]}else{if((c=l.next()).done)break;g=c.value}var f=g;u.push(n.fail(i({value:t,branch:r,path:a},f)))}}else"object"==typeof o?u.push(n.fail(i({value:t,branch:r,path:a},o))):v(!1,"Validator functions must return a boolean, a failure object, or an array of failure objects, but you passed: "+o);return[u]},n}(e,r,t)},t.instance=function(e,r){return function(e,t,r){v("function"==typeof e,"Instance structs must be defined as a function, but you passed: "+e);var n=r((function(t){return t instanceof e}),t);return n.kind="instance",n.type="instance<"+e.name+">",n}(e,r,t)},t.interface=function(e,r){return function(e,t,r){v("object"==typeof e,"Interface structs must be defined as an object, but you passed: "+e);var n={};for(var a in e)n[a]=r(e[a]);var i=A({kind:"interface",type:"interface<{"+Object.keys(e).join()+"}>",defaults:t,struct:r});return i.check=function(e,t,r){if(void 0===e&&(e=i.default()),"object"!=typeof e&&"function"!=typeof e)return[[i.fail({value:e,branch:t,path:r})]];var a=[];for(var o in n){var u=n[o],l=e[o],s=u.check(l,t.concat(l),r.concat(o))[0];s&&a.push.apply(a,s)}return a.length?[a]:[void 0,e]},i}(e,r,t)},t.intersection=function(e,r){return function(e,t,r){v(Array.isArray(e)&&0!==e.length,"Intersection structs must be defined as a non-empty array, but you passed: "+e);var n=e.map((function(e){return r(e)})),a=n.map((function(e){return e.type})).join(" & "),i=A({kind:"intersection",type:a,defaults:t,struct:r});return i.check=function(e,t,r){void 0===e&&(e=i.default());var a=e,o=n,u=Array.isArray(o),l=0;for(o=u?o:o[Symbol.iterator]();;){var s;if(u){if(l>=o.length)break;s=o[l++]}else{if((l=o.next()).done)break;s=l.value}var c=s.check(e,t,r),g=c[0],f=c[1];if(g)return[[i.fail({value:e,branch:t,path:r})]];a=f}return[void 0,a]},i}(e,r,t)},t.lazy=function(e,r){return function(e,t,r){v("function"==typeof e,"Lazy structs must be defined as a function, but you passed: "+e);var n=A({kind:"lazy",type:"lazy<…>",defaults:t,struct:r});return n.check=function(){return Object.assign(n,e()),n.check.apply(n,arguments)},n}(e,r,t)},t.literal=function(e,r){return function(e,t,r){var n=r((function(t){return t===e}),t);return n.kind="literal",n.type="string"==typeof e?'"'+e+'"':""+e,n}(e,r,t)},t.object=function(e,r){return function(e,t,r){v("object"==typeof e,"Object structs must be defined as an object, but you passed: "+e);var n={};for(var a in e)n[a]=r(e[a]);var i=A({kind:"object",type:"{"+Object.keys(e).join()+"}",defaults:t,struct:r});return i.check=function(e,t,r){void 0===e&&(e=i.default());var a=i.default();if(void 0===e&&(e=a),"object"!==g(e))return[[i.fail({value:e,branch:t,path:r})]];var o={},u=[],l=new Set(Object.keys(n).concat(Object.keys(e))),s=Array.isArray(l),c=0;for(l=s?l:l[Symbol.iterator]();;){var f;if(s){if(c>=l.length)break;f=l[c++]}else{if((c=l.next()).done)break;f=c.value}var E=f,d=e[E],p=r.concat(E),v=t.concat(d),S=n[E];if(void 0===d&&null!=a&&E in a&&(d="function"==typeof a[E]?a[E](e,t,r):a[E]),E in n){var R=S.check(d,v,p),_=R[0],A=R[1];_?u.push.apply(u,_):void 0!==A&&E in n&&(o[E]=A)}else u.push(i.fail({type:void 0,value:d,path:p,branch:e}))}return u.length?[u]:[void 0,o]},i}(e,r,t)},t.optional=function(e,r){return I([e,"undefined"],r,t)},t.partial=function(e,r){return function(e,t,r){v("object"==typeof e,"Partial structs must be defined as an object, but you passed: "+e);var n={};for(var a in e)n[a]=r.union([e[a],"undefined"]);var i=A({kind:"object",type:"{"+Object.keys(e).join()+"}",defaults:t,struct:r});return i.check=function(e,t,r){void 0===e&&(e=i.default());var a=i.default();if(void 0===e&&(e=a),"object"!==g(e))return[[i.fail({value:e,branch:t,path:r})]];var o={},u=[],l=e,s=Array.isArray(l),c=0;for(l=s?l:l[Symbol.iterator]();;){var f;if(s){if(c>=l.length)break;f=l[c++]}else{if((c=l.next()).done)break;f=c.value}var E=f,d=e[E],p=r.concat(E),v=t.concat(d),S=n[E];if(void 0===d&&null!=a&&E in a&&(d="function"==typeof a[E]?a[E](e,t,r):a[E]),E in n){var R=S.check(d,v,p),_=R[0],A=R[1];_?u.push.apply(u,_):void 0!==A&&E in n&&(o[E]=A)}else u.push(i.fail({type:void 0,value:d,path:p,branch:e}))}return u.length?[u]:[void 0,o]},i}(e,r,t)},t.pick=function(e,r){return function(e,t,r){v("object"==typeof e,"Pick structs must be defined as an object, but you passed: "+e);var n={};for(var a in e)n[a]=r(e[a]);var i=A({kind:"pick",type:"pick<{"+Object.keys(e).join()+"}>",defaults:t,struct:r});return i.check=function(e,t,r){void 0===e&&(e=i.default());var a=i.default();if(void 0===e&&(e=a),"object"!==g(e))return[[i.fail({value:e,branch:t,path:r})]];var o={},u=[];for(var l in n){var s=e[l],c=r.concat(l),f=t.concat(s),E=n[l];void 0===s&&null!=a&&l in a&&(s="function"==typeof a[l]?a[l](e,t,r):a[l]);var d=E.check(s,f,c),p=d[0],v=d[1];p?u.push.apply(u,p):void 0!==v&&l in n&&(o[l]=v)}return u.length?[u]:[void 0,o]},i}(e,r,t)},t.record=function(e,r){return function(e,t,r){v(Array.isArray(e)&&2===e.length,"Record structs must be defined as an array with two elements, but you passed: "+e);var n=r(e[0]),a=r(e[1]),o=A({kind:"record",type:"record<"+n.type+","+a.type+">",defaults:t,struct:r});return o.check=function(e,t,r){var u=o.default();if(e=u?i({},u,{},e):e,"object"!==g(e))return[[o.fail({value:e,branch:t,path:r})]];var l={},s=[];for(var c in e){var f=e[c],E=r.concat(c),d=t.concat(f),p=n.check(c,d,E),v=p[0],S=p[1];if(v)s.push.apply(s,v);else{var R=a.check(f,d,E),_=R[0],A=R[1];_?s.push.apply(s,_):l[S]=A}}return s.length?[s]:[void 0,l]},o}(e,r,t)},t.scalar=function(e,r){return function(e,t,r){v("string"==typeof e,"Scalar structs must be defined as a string, but you passed: "+e);var n=r.Types;v(e in n,'No struct validator function found for type "'+e+'".');var a=r(n[e],t);return a.kind="scalar",a.type=e,a}(e,r,t)},t.size=function(e,r){return function(e,t,r){v(Array.isArray(e)&&2===e.length&&e.every((function(e){return"number"==typeof e})),"Size structs must be defined as an array with two number elements, but you passed: "+e);var n=e[0],a=e[1],i=r((function(e){return null!=e&&"number"==typeof e.length&&e.length>=n&&e.length<=a}),t);return i.kind="size",i.type="size<"+n+","+a+">",i}(e,r,t)},t.tuple=function(e,r){return function(e,t,r){v(Array.isArray(e),"Tuple structs must be defined as an array, but you passed: "+e);var n=e.map((function(e){return r(e)})),a=A({kind:"tuple",type:"["+n.map((function(e){return e.type})).join()+"]",defaults:t,struct:r});return a.check=function(e,t,r){if(void 0===e&&(e=a.default()),!Array.isArray(e))return[[a.fail({value:e,branch:t,path:r})]];for(var i=[],o=[],u=Math.max(e.length,n.length),l=0;l<u;l++){var s=n[l],c=e[l],g=r.concat(l),f=t.concat(c);if(s){var E=s.check(c,f,g),d=E[0],p=E[1];d?o.push.apply(o,d):i[l]=p}else o.push(a.fail({type:void 0,value:c,path:g,branch:f}))}return o.length?[o]:[void 0,i]},a}(e,r,t)},t.union=function(e,r){return I(e,r,t)},t.Error=e.error||S,t.Types=i({},E,{},e.types),t},b=y()},function(e,t,r){var n=r(5).getCurrentTime,a={send:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.method,r=e.url;if(r&&t)return new Promise((function(e,a){var i=new XMLHttpRequest;i.open(t,r),i.send(),i.onload=function(){try{e(JSON.parse(i.response))}catch(e){console.error(e)}},i.onerror=function(){var e="VWO-SDK - [ERROR]: ".concat(n()," Request failed for fetching account settings. Got Status Code: ").concat(i.status);console.error(e),a(e)}}))}};e.exports=a}])}));
//# sourceMappingURL=vwo-javascript-sdk.min.js.map